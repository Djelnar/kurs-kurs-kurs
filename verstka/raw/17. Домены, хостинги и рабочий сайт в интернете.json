{"stage":3,"title":"Домены, хостинги и рабочий сайт в интернете","subTitle":"Приближаемся к реальной разработке — разбираемся как устроен интернет и как проекту оказаться в нём","markdown":"# Домены, хостинги и рабочий сайт в интернете\n\n> Приближаемся к реальной разработке — разбираемся как устроен интернет и как проекту оказаться в нём\n\nОкей, за нашими плечами опыт вёрстки, настройки девелоперских инструментов и разделения на исходники (удобные для разработчика) и билды (оптимизированные для продакшена).\n\nОсталось разобраться с продакшеном!\n\n## Домены, хостинги, ДНС\n\nКак устроен интернет? Во [втором уроке](https://erodionov.ru/courses/verstka/FhTKluFzm7/nHdviS9Jil) мы немного коснулись этой темы, сейчас — разберёмся подробнее.\n\nИнтернет подобен городу: у нас есть **здания** (хостинги), в которых находятся **компании** (сайты), где **реестр арендаторов** (ДНС) указывает что в конкретном **офисе** (IP-адрес) находится **филиал** компании (домен).\n\nЗафиксируем: с помощью ДНС (например, [Cloudflare](http://cloudflare.com/) или [Amazon Route 53](https://aws.amazon.com/route53/)) мы указываем, что на конкретном айпи-адресе находится наш домен.\n\nГде взять домен? Где взять айпи-адрес?\n\nДомены покупаются у регистраторов доменов (например, [Namecheap.com](http://www.namecheap.com/)), после этого вы его подключаете к какой-нибудь ДНС-панели (например, [Cloudflare](http://cloudflare.com)), где указываете его настройки.\n\nПосле вы арендуете сервер, например, на [Scaleway](https://www.scaleway.com/) или популярном [DigitalOcean](https://m.do.co/c/814480d2eb4b). Тут уже придётся возиться с линуксами или докерами, но у ДО есть огромная [база туториалов](https://www.digitalocean.com/community/).\n\nОкей, у вас есть сервер, вы его настроили ([поставив](https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-16-04) nginx), у вас есть его айпи-адрес. Его-то вы и указываете в ДНС-панели, выбрав А-запись.\n\n![](https://i.imgur.com/2DUxQYd.png)\n\n> MX-запись для почты, TXT для верификации домена у Яндекса ([Яндекс.Вебмастер](http://webmaster.yandex.ru/)) и Гугла ([Google Webmasters](https://www.google.com/webmasters)), CNAME для альясов (например, с помощью них работает [GitHub Pages](https://pages.github.com/) — хостинг фронтэнда от Гитхаба)\n\nНа самом сервере вы через веб-сервер типа [nginx](http://nginx.com/) должны настроить что должно быть по конкретному домену (или поддомену), например, на `erodionov.ru` можно настроить раздачу файлов из директории `/data/www/erodionov.ru`.\n\nВ эту директорию вы копируете файлы через утилиту [`scp`](https://en.wikipedia.org/wiki/Secure_copy).\n\n---\n\nСложно? Да нет, в целом понятно, но можно ведь проще.\n\n## CLI-хостинги\n\nВ последнее время стали популярны проекты типа [Now](https://zeit.co/now) и [surge](http://surge.sh/) — деплой через командную строку.\n\nЭти проекты заточены под одну функциональность: работа с веб-приложениями. Обычные серверы ведь неотличимы от компьютера — туда можно накидать хоть раздачу сайтов, хоть скачивание торрентов, хоть прослушивание музыки.\n\nВ Наусш такое не прокатит: он умеет только деплоить проекты и раздавать их. Да, вот так вот просто!\n\nКак с этим работать? [`now`](http://npm.im/now) это пакет из Нпма, который ставится глобально в систему (`yarn global add now`).\n\n![](https://i.imgur.com/fFUyfAv.png)\n\nЭта утилита занимается многим: от управления ДНС (`now dns`) и доменами (`now domains`) до деплоев на ресурсы Зейта (компании, которая развивает Нау).\n\nДавайте задеплоим наш тестовый проект:\n\n![](https://i.imgur.com/AO8uQHc.png)\n\nКак видите, ничего сложного — просто команда `now deploy [path]`, а в ответ — ссылка [https://test-now-zxzcvkslxi.now.sh](https://test-now-zxzcvkslxi.now.sh) на наш сайт.\n\nПочему она такая некрасивая? Деплои у Зейта **иммутабельные** — это означает, что нельзя перезаписать один и тот же сайт, каждый деплой будет уникальным.\n\n![](https://i.imgur.com/uJJ41q2.png)\n\nНо мы ведь не можем давать людям такие ссылки? Как они будут заходить на сайт?\n\nНам помогут [альясы](https://zeit.co/docs/features/aliases): они укажут что за определенным адресом (`test-now-for-verstka.now.sh`) закреплен конкретный деплой.\n\n![](https://i.imgur.com/Djtyb9A.png)\n\nМожно ли свой домен `test-now-for-verstka.ru`? [Да](https://zeit.co/docs/features/aliases#custom-domains) — читайте документацию.\n\n## Задание\n\nКупите домен (например, `ubereats-demo-erodionov`, где `erodionov` ваши имя и фамилия) на [Namecheap](https://www.namecheap.com/), подключите его к [Cloudflare](http://cloudflare.com/) и задеплойте ваш проект на [Zeit](https://zeit.co/) через [Now](https://zeit.co/now).\n\nУчтите, что задеплоен должен быть билд, а не исходник.\n\nЛоги деплоя доступны по адресу `/_logs`, а исходники — `/_src` (например, `ubereats-demo-erodionov.ru/_src`).\n\nПридётся потратиться на домен и Зейт? Ну да, но вам же нужна практика.\n\n## Итог\n\nСегодня мы узнали как устроен интернет — прошлись по сложным вещам типа айпи-адресов, ДНС, доменов и хостингов, а в конце пришли к удобному Зейту.\n","previous":["Z85TwJEQNd","nHdviS9Jil","kK6TqBobfl","Wfn3j53w5G","vUP7iRK2my","mGpNZTKciZ","DNmsGGToly","iZzoQdvKTy","dXE2elcH7C","4ipvf7K5px","79Mt7wYOrs","7KIkWf2nMt","ypIwD9OkNU","KEZTmbshEY","BxVTHC2RI5","Qf6hOneMdp","F0w7RYgfLs"],"id":"QQpafAvC16","stageId":"WxcdGfFHO1"}